{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/config/navigation.ts"],"sourcesContent":["import {\n    Home,\n    TrendingUp,\n    FileText,\n    DollarSign,\n    Package,\n    Users,\n    UserCircle,\n    MoreHorizontal,\n    Warehouse,\n    Settings,\n    LayoutGrid\n} from 'lucide-react';\nimport { UserRole } from '@/types';\n\nexport type AccessMode = 'full' | 'read-only' | 'hidden';\n\nexport interface MenuConfig {\n    id: string;\n    label: string;\n    route: string;\n    icon: string;\n    allowedRoles: UserRole[];\n    // Map role to its specific access mode on this page\n    accessMode: Partial<Record<UserRole, AccessMode>>;\n    requiresStoreScope: boolean;\n}\n\n/**\n * Production-grade Navigation Configuration\n */\nexport const navigationConfig: MenuConfig[] = [\n    {\n        id: 'home',\n        label: 'Home',\n        route: '/backoffice/home',\n        icon: 'Home',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full'\n        },\n        requiresStoreScope: false\n    },\n    {\n        id: 'sales-activity',\n        label: 'Sales Activity',\n        route: '/backoffice/sales-activity',\n        icon: 'TrendingUp',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER', 'EMPLOYEE'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full',\n            EMPLOYEE: 'read-only'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'reports',\n        label: 'Reports',\n        route: '/backoffice/reports',\n        icon: 'FileText',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'read-only'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'finances',\n        label: 'Finances',\n        route: '/backoffice/finances',\n        icon: 'DollarSign',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'items',\n        label: 'Items',\n        route: '/backoffice/items',\n        icon: 'Package',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER', 'EMPLOYEE'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full',\n            EMPLOYEE: 'read-only'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'employees',\n        label: 'Users',\n        route: '/backoffice/users',\n        icon: 'Users',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER', 'EMPLOYEE'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full',\n            EMPLOYEE: 'read-only'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'customers',\n        label: 'Customers',\n        route: '/backoffice/customers',\n        icon: 'UserCircle',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER', 'EMPLOYEE'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full',\n            EMPLOYEE: 'read-only'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'inventory',\n        label: 'Inventory',\n        route: '/backoffice/inventory',\n        icon: 'Warehouse',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full'\n        },\n        requiresStoreScope: true\n    },\n    {\n        id: 'business-operations',\n        label: 'Settings',\n        route: '/backoffice/settings/business-operations',\n        icon: 'Settings',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full'\n        },\n        requiresStoreScope: false\n    },\n    {\n        id: 'more',\n        label: 'More',\n        route: '/backoffice/more',\n        icon: 'MoreHorizontal',\n        allowedRoles: ['ADMIN', 'STORE_MANAGER'],\n        accessMode: {\n            ADMIN: 'full',\n            STORE_MANAGER: 'full'\n        },\n        requiresStoreScope: false\n    }\n];\n\n// Icon mapping for dynamic rendering\nexport const iconMap = {\n    Home,\n    TrendingUp,\n    FileText,\n    DollarSign,\n    Package,\n    Users,\n    UserCircle,\n    MoreHorizontal,\n    Warehouse,\n    Settings,\n    LayoutGrid,\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA+BO,MAAM,mBAAiC;IAC1C;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;YAAiB;SAAW;QACpD,YAAY;YACR,OAAO;YACP,eAAe;YACf,UAAU;QACd;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;YAAiB;SAAW;QACpD,YAAY;YACR,OAAO;YACP,eAAe;YACf,UAAU;QACd;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;YAAiB;SAAW;QACpD,YAAY;YACR,OAAO;YACP,eAAe;YACf,UAAU;QACd;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;YAAiB;SAAW;QACpD,YAAY;YACR,OAAO;YACP,eAAe;YACf,UAAU;QACd;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;IACA;QACI,IAAI;QACJ,OAAO;QACP,OAAO;QACP,MAAM;QACN,cAAc;YAAC;YAAS;SAAgB;QACxC,YAAY;YACR,OAAO;YACP,eAAe;QACnB;QACA,oBAAoB;IACxB;CACH;AAGM,MAAM,UAAU;IACnB,MAAA,8MAAI;IACJ,YAAA,mOAAU;IACV,UAAA,6NAAQ;IACR,YAAA,mOAAU;IACV,SAAA,sNAAO;IACP,OAAA,gNAAK;IACL,YAAA,mOAAU;IACV,gBAAA,qOAAc;IACd,WAAA,4NAAS;IACT,UAAA,yNAAQ;IACR,YAAA,mOAAU;AACd"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/utils/index.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * Utility function to merge Tailwind CSS classes\n * Combines clsx and tailwind-merge for optimal class handling\n */\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n\n/**\n * Format currency for display\n * Frontend ONLY displays - never calculates\n */\nexport function formatCurrency(amount: number, currency = 'USD'): string {\n    return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency,\n    }).format(amount);\n}\n\n/**\n * Format date for display\n */\nexport function formatDate(date: Date | string, format: 'short' | 'long' = 'short'): string {\n    const d = typeof date === 'string' ? new Date(date) : date;\n\n    if (format === 'long') {\n        return new Intl.DateTimeFormat('en-US', {\n            dateStyle: 'long',\n            timeStyle: 'short',\n        }).format(d);\n    }\n\n    return new Intl.DateTimeFormat('en-US', {\n        dateStyle: 'short',\n    }).format(d);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAMO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB;AAMO,SAAS,eAAe,MAAc,EAAE,WAAW,KAAK;IAC3D,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP;IACJ,GAAG,MAAM,CAAC;AACd;AAKO,SAAS,WAAW,IAAmB,EAAE,SAA2B,OAAO;IAC9E,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IAEtD,IAAI,WAAW,QAAQ;QACnB,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACpC,WAAW;YACX,WAAW;QACf,GAAG,MAAM,CAAC;IACd;IAEA,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACpC,WAAW;IACf,GAAG,MAAM,CAAC;AACd"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/modules/m9/components/Sidebar/SidebarItem.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { LucideIcon } from 'lucide-react';\nimport { cn } from '@/utils';\n\ninterface SidebarItemProps {\n    label: string;\n    icon: LucideIcon;\n    path: string;\n    isCollapsed: boolean;\n}\n\nexport const SidebarItem: React.FC<SidebarItemProps> = ({\n    label,\n    icon: Icon,\n    path,\n    isCollapsed,\n}) => {\n    const pathname = usePathname();\n    const isActive = pathname === path || (path !== '/backoffice/home' && pathname?.startsWith(path));\n\n    return (\n        <Link\n            href={path}\n            className={cn(\n                'flex items-center gap-3 px-3 h-10 text-sm font-medium rounded-md relative',\n                isActive\n                    ? 'text-emerald-700 bg-emerald-50'\n                    : 'text-slate-600 hover:text-slate-900 hover:bg-slate-50',\n                isCollapsed && 'justify-center'\n            )}\n            title={isCollapsed ? label : undefined}\n        >\n            {isActive && (\n                <div className=\"absolute left-0 top-2 bottom-2 w-1 bg-emerald-600 rounded-r-full\" />\n            )}\n            <Icon className={cn(\"h-5 w-5 shrink-0\", isActive ? \"text-emerald-600\" : \"text-slate-400\")} aria-hidden=\"true\" />\n            {!isCollapsed && <span>{label}</span>}\n        </Link>\n    );\n};\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;;;AANA;;;;AAeO,MAAM,cAA0C,CAAC,EACpD,KAAK,EACL,MAAM,IAAI,EACV,IAAI,EACJ,WAAW,EACd;;IACG,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,WAAW,aAAa,QAAS,SAAS,sBAAsB,UAAU,WAAW;IAE3F,qBACI,6LAAC,0KAAI;QACD,MAAM;QACN,WAAW,IAAA,8HAAE,EACT,6EACA,WACM,mCACA,yDACN,eAAe;QAEnB,OAAO,cAAc,QAAQ;;YAE5B,0BACG,6LAAC;gBAAI,WAAU;;;;;;0BAEnB,6LAAC;gBAAK,WAAW,IAAA,8HAAE,EAAC,oBAAoB,WAAW,qBAAqB;gBAAmB,eAAY;;;;;;YACtG,CAAC,6BAAe,6LAAC;0BAAM;;;;;;;;;;;;AAGpC;GA5Ba;;QAMQ,oJAAW;;;KANnB"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/hooks/useRouteAccess.ts"],"sourcesContent":["import { useAuth } from '@/app/providers/AuthProvider';\nimport { navigationConfig, MenuConfig, AccessMode } from '@/config/navigation';\n\n\n/**\n * useRouteAccess Hook\n * Centralized, declarative role-based UI protection.\n * Drives visibility and behavior based on the production-grade session.\n */\nexport const useRouteAccess = () => {\n    const { role, storeIds, user } = useAuth();\n\n    /**\n     * Gets visible menu items for the current role\n     */\n    const getVisibleMenuItems = (): MenuConfig[] => {\n        if (!role) return [];\n        return navigationConfig.filter(item =>\n            item.allowedRoles.includes(role) &&\n            item.accessMode[role] !== 'hidden'\n        );\n    };\n\n    /**\n     * Checks if a path is authorized\n     */\n    const isAuthorized = (path: string): boolean => {\n        if (!role) return false;\n\n        // If it's a direct backoffice subpath, check config\n        const item = navigationConfig.find(m => m.route === path);\n        if (!item) {\n            // Check for index or parent paths\n            if (path === '/backoffice' || path === '/backoffice/') return true;\n            return true;\n        }\n\n        return item.allowedRoles.includes(role);\n    };\n\n    /**\n     * Gets access mode for a specific page\n     */\n    const getAccessMode = (path: string): AccessMode => {\n        if (!role) return 'hidden';\n        const item = navigationConfig.find(m => m.route === path);\n        if (!item) return 'full';\n        return item.accessMode[role] || 'hidden';\n    };\n\n    /**\n     * Checks if current user can switch stores\n     */\n    const canManageStores = (): boolean => {\n        if (role === 'ADMIN') return true;\n        if (role === 'STORE_MANAGER' && storeIds.length > 1) return true;\n        return false;\n    };\n\n    /**\n     * Checks if user is restricted to specific stores\n     */\n    const getManagedStoreIds = (): string[] | 'all' => {\n        if (role === 'ADMIN') return 'all';\n        return storeIds;\n    };\n\n    return {\n        user,\n        role,\n        getVisibleMenuItems,\n        isAuthorized,\n        getAccessMode,\n        canManageStores,\n        getManagedStoreIds,\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAQO,MAAM,iBAAiB;;IAC1B,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAA,sJAAO;IAExC;;KAEC,GACD,MAAM,sBAAsB;QACxB,IAAI,CAAC,MAAM,OAAO,EAAE;QACpB,OAAO,kJAAgB,CAAC,MAAM,CAAC,CAAA,OAC3B,KAAK,YAAY,CAAC,QAAQ,CAAC,SAC3B,KAAK,UAAU,CAAC,KAAK,KAAK;IAElC;IAEA;;KAEC,GACD,MAAM,eAAe,CAAC;QAClB,IAAI,CAAC,MAAM,OAAO;QAElB,oDAAoD;QACpD,MAAM,OAAO,kJAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;QACpD,IAAI,CAAC,MAAM;YACP,kCAAkC;YAClC,IAAI,SAAS,iBAAiB,SAAS,gBAAgB,OAAO;YAC9D,OAAO;QACX;QAEA,OAAO,KAAK,YAAY,CAAC,QAAQ,CAAC;IACtC;IAEA;;KAEC,GACD,MAAM,gBAAgB,CAAC;QACnB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,OAAO,kJAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;QACpD,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,KAAK,UAAU,CAAC,KAAK,IAAI;IACpC;IAEA;;KAEC,GACD,MAAM,kBAAkB;QACpB,IAAI,SAAS,SAAS,OAAO;QAC7B,IAAI,SAAS,mBAAmB,SAAS,MAAM,GAAG,GAAG,OAAO;QAC5D,OAAO;IACX;IAEA;;KAEC,GACD,MAAM,qBAAqB;QACvB,IAAI,SAAS,SAAS,OAAO;QAC7B,OAAO;IACX;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GAnEa;;QACwB,sJAAO"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/modules/m9/components/Sidebar/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronLeft, ChevronRight, Plus } from 'lucide-react';\nimport { iconMap } from '@/config/navigation';\nimport { SidebarItem } from './SidebarItem';\nimport { cn } from '@/utils';\nimport { useRouteAccess } from '@/hooks/useRouteAccess';\n\n/**\n * Sidebar Component (Production Grade)\n * Renders dynamically from navigationConfig and current user permissions.\n */\nexport const Sidebar: React.FC = () => {\n    const [isCollapsed, setIsCollapsed] = useState(false);\n    const { role, getVisibleMenuItems } = useRouteAccess();\n\n    const menuItems = getVisibleMenuItems();\n\n    // Primary action button allowed for ADMIN and STORE_MANAGER roles\n    const showNewSale = role === 'ADMIN' || role === 'STORE_MANAGER';\n\n    return (\n        <div\n            className={cn(\n                'flex flex-col bg-white fixed inset-y-0 z-50 border-r border-slate-200 transition-all duration-300',\n                isCollapsed ? 'w-20' : 'w-64'\n            )}\n        >\n            {/* Brand / Logo Area */}\n            <div className={cn(\n                'flex h-14 shrink-0 items-center px-4',\n                isCollapsed ? 'justify-center border-b border-slate-50' : 'justify-start mb-2'\n            )}>\n                <div className=\"flex items-center gap-2\">\n                    <div className=\"w-7 h-7 bg-emerald-600 rounded-md flex items-center justify-center shadow shadow-emerald-100\">\n                        <span className=\"text-white text-[10px] font-bold tracking-tighter\">Z</span>\n                    </div>\n                    {!isCollapsed && (\n                        <span className=\"text-sm font-black text-slate-800 tracking-tight lowercase\">\n                            zyappy\n                        </span>\n                    )}\n                </div>\n            </div>\n\n            {/* Primary Action Button */}\n            {showNewSale && (\n                <div className=\"px-4 mb-4 mt-2\">\n                    <button className={cn(\n                        \"w-full bg-emerald-600 hover:bg-emerald-700 text-white rounded-md flex items-center transition-all duration-200 active:scale-95\",\n                        isCollapsed ? \"justify-center h-12\" : \"px-4 py-2 gap-2 h-11\"\n                    )}>\n                        <Plus className=\"w-5 h-5 shrink-0\" />\n                        {!isCollapsed && <span className=\"text-sm font-bold\">New sale</span>}\n                    </button>\n                </div>\n            )}\n\n            {/* Navigation (Filtered by Role) */}\n            <nav className=\"flex flex-1 flex-col px-3 gap-y-1 overflow-y-auto\">\n                {menuItems.map((item) => {\n                    const IconComponent = iconMap[item.icon as keyof typeof iconMap];\n                    return (\n                        <SidebarItem\n                            key={item.id}\n                            label={item.label}\n                            icon={IconComponent}\n                            path={item.route}\n                            isCollapsed={isCollapsed}\n                        />\n                    );\n                })}\n            </nav>\n\n            {/* Collapse Toggle */}\n            <div className=\"p-3 border-t border-slate-100 bg-slate-50/50\">\n                <button\n                    onClick={() => setIsCollapsed(!isCollapsed)}\n                    className={cn(\n                        'w-full flex items-center gap-2 px-3 py-2 rounded-md text-[10px] font-bold text-slate-400 hover:text-slate-800 hover:bg-slate-100 transition-all uppercase tracking-widest',\n                        isCollapsed && 'justify-center'\n                    )}\n                >\n                    {isCollapsed ? (\n                        <ChevronRight className=\"h-5 w-5\" />\n                    ) : (\n                        <>\n                            <ChevronLeft className=\"h-5 w-5\" />\n                            <span>Collapse</span>\n                        </>\n                    )}\n                </button>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AAaO,MAAM,UAAoB;;IAC7B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,EAAE,IAAI,EAAE,mBAAmB,EAAE,GAAG,IAAA,mJAAc;IAEpD,MAAM,YAAY;IAElB,kEAAkE;IAClE,MAAM,cAAc,SAAS,WAAW,SAAS;IAEjD,qBACI,6LAAC;QACG,WAAW,IAAA,8HAAE,EACT,qGACA,cAAc,SAAS;;0BAI3B,6LAAC;gBAAI,WAAW,IAAA,8HAAE,EACd,wCACA,cAAc,4CAA4C;0BAE1D,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAK,WAAU;0CAAoD;;;;;;;;;;;wBAEvE,CAAC,6BACE,6LAAC;4BAAK,WAAU;sCAA6D;;;;;;;;;;;;;;;;;YAQxF,6BACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAO,WAAW,IAAA,8HAAE,EACjB,kIACA,cAAc,wBAAwB;;sCAEtC,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBACf,CAAC,6BAAe,6LAAC;4BAAK,WAAU;sCAAoB;;;;;;;;;;;;;;;;;0BAMjE,6LAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC;oBACZ,MAAM,gBAAgB,yIAAO,CAAC,KAAK,IAAI,CAAyB;oBAChE,qBACI,6LAAC,+KAAW;wBAER,OAAO,KAAK,KAAK;wBACjB,MAAM;wBACN,MAAM,KAAK,KAAK;wBAChB,aAAa;uBAJR,KAAK,EAAE;;;;;gBAOxB;;;;;;0BAIJ,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBACG,SAAS,IAAM,eAAe,CAAC;oBAC/B,WAAW,IAAA,8HAAE,EACT,6KACA,eAAe;8BAGlB,4BACG,6LAAC,yOAAY;wBAAC,WAAU;;;;;iFAExB;;0CACI,6LAAC,sOAAW;gCAAC,WAAU;;;;;;0CACvB,6LAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAOlC;GAnFa;;QAE6B,mJAAc;;;KAF3C"}},
    {"offset": {"line": 566, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/modules/m9/components/Header/StoreSelector.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronDown, Store as StoreIcon } from 'lucide-react';\nimport { useTenantStore } from '@/app/providers/TenantStoreProvider';\nimport { useRouteAccess } from '@/hooks/useRouteAccess';\nimport { cn } from '@/utils';\n\n/**\n * StoreSelector Component (Production Version)\n * Restricts switching based on user.storeIds and role.\n */\nexport const StoreSelector: React.FC = () => {\n    const { tenant, store, allStores, setStore } = useTenantStore();\n    const { canManageStores, getManagedStoreIds } = useRouteAccess();\n    const [isOpen, setIsOpen] = useState(false);\n\n    const managedStoreIds = getManagedStoreIds();\n    const canSwitch = canManageStores();\n\n    // Filter stores based on what the user is allowed to manage\n    const allowedStores = managedStoreIds === 'all'\n        ? allStores\n        : allStores.filter(s => managedStoreIds.includes(s.id));\n\n    // If only one store allowed, don't show selector as interactive\n    if (allowedStores.length <= 1) {\n        return (\n            <div className=\"flex items-center gap-2 px-3 py-1.5 min-w-[160px] border border-slate-100 rounded-full bg-slate-50 text-slate-500\">\n                <StoreIcon className=\"w-3.5 h-3.5 opacity-50\" />\n                <div className=\"flex flex-col items-start min-w-0\">\n                    <span className=\"text-[9px] font-bold uppercase tracking-widest leading-none mb-0.5\">{tenant?.name}</span>\n                    <span className=\"font-bold text-slate-700 truncate w-full text-xs\">{store?.name}</span>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"relative\">\n            <button\n                onClick={() => canSwitch && setIsOpen(!isOpen)}\n                className={cn(\n                    \"flex items-center gap-2 px-3 py-1.5 min-w-[200px] border border-slate-300 rounded-full bg-white transition-all shadow-sm\",\n                    canSwitch ? \"hover:bg-slate-50 hover:border-slate-400 cursor-pointer\" : \"cursor-default\"\n                )}\n            >\n                <StoreIcon className=\"w-3.5 h-3.5 text-emerald-600\" />\n                <div className=\"flex flex-col items-start flex-1 min-w-0\">\n                    <span className=\"text-[9px] text-slate-500 uppercase font-black tracking-widest leading-none mb-0.5\">{tenant?.name}</span>\n                    <span className=\"font-bold text-slate-900 truncate w-full text-left text-xs\">{store?.name}</span>\n                </div>\n                {canSwitch && <ChevronDown className=\"w-4 h-4 text-slate-400 shrink-0 ml-1\" />}\n            </button>\n\n            {/* Dropdown (Restricted by Role) */}\n            {isOpen && canSwitch && (\n                <div className=\"absolute top-full left-0 mt-2 w-64 bg-white border border-slate-200 rounded-xl shadow-2xl z-50 overflow-hidden ring-1 ring-black ring-opacity-5\">\n                    <div className=\"p-1\">\n                        <div className=\"px-4 py-2 bg-slate-50 border-b border-slate-100 mb-1\">\n                            <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] block\">\n                                Switch Location\n                            </span>\n                        </div>\n                        {allowedStores.map((s) => (\n                            <button\n                                key={s.id}\n                                onClick={() => {\n                                    setStore(s);\n                                    setIsOpen(false);\n                                }}\n                                className={cn(\n                                    'w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors rounded-lg group',\n                                    s.id === store?.id\n                                        ? 'bg-emerald-50 text-emerald-700'\n                                        : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900'\n                                )}\n                            >\n                                <div className=\"flex flex-col items-start flex-1\">\n                                    <span className=\"font-bold\">{s.name}</span>\n                                    <span className=\"text-[10px] opacity-60 font-medium group-hover:opacity-100\">{s.code}</span>\n                                </div>\n                                {s.id === store?.id && (\n                                    <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500\" />\n                                )}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;;;AANA;;;;;;AAYO,MAAM,gBAA0B;;IACnC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,IAAA,oKAAc;IAC7D,MAAM,EAAE,eAAe,EAAE,kBAAkB,EAAE,GAAG,IAAA,mJAAc;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,kBAAkB;IACxB,MAAM,YAAY;IAElB,4DAA4D;IAC5D,MAAM,gBAAgB,oBAAoB,QACpC,YACA,UAAU,MAAM,CAAC,CAAA,IAAK,gBAAgB,QAAQ,CAAC,EAAE,EAAE;IAEzD,gEAAgE;IAChE,IAAI,cAAc,MAAM,IAAI,GAAG;QAC3B,qBACI,6LAAC;YAAI,WAAU;;8BACX,6LAAC,gNAAS;oBAAC,WAAU;;;;;;8BACrB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAK,WAAU;sCAAsE,QAAQ;;;;;;sCAC9F,6LAAC;4BAAK,WAAU;sCAAoD,OAAO;;;;;;;;;;;;;;;;;;IAI3F;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBACG,SAAS,IAAM,aAAa,UAAU,CAAC;gBACvC,WAAW,IAAA,8HAAE,EACT,4HACA,YAAY,4DAA4D;;kCAG5E,6LAAC,gNAAS;wBAAC,WAAU;;;;;;kCACrB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAsF,QAAQ;;;;;;0CAC9G,6LAAC;gCAAK,WAAU;0CAA8D,OAAO;;;;;;;;;;;;oBAExF,2BAAa,6LAAC,sOAAW;wBAAC,WAAU;;;;;;;;;;;;YAIxC,UAAU,2BACP,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAK,WAAU;0CAAyE;;;;;;;;;;;wBAI5F,cAAc,GAAG,CAAC,CAAC,kBAChB,6LAAC;gCAEG,SAAS;oCACL,SAAS;oCACT,UAAU;gCACd;gCACA,WAAW,IAAA,8HAAE,EACT,uFACA,EAAE,EAAE,KAAK,OAAO,KACV,mCACA;;kDAGV,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DAAa,EAAE,IAAI;;;;;;0DACnC,6LAAC;gDAAK,WAAU;0DAA8D,EAAE,IAAI;;;;;;;;;;;;oCAEvF,EAAE,EAAE,KAAK,OAAO,oBACb,6LAAC;wCAAI,WAAU;;;;;;;+BAjBd,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;AA0BzC;GAhFa;;QACsC,oKAAc;QACb,mJAAc;;;KAFrD"}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/modules/m9/components/Header/DateRangePicker.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronDown } from 'lucide-react';\nimport { cn } from '@/utils';\n\n/**\n * DateRangePicker Component (UI Only)\n * Matches Clover design: text-based preset selector with rounded borders\n */\nexport const DateRangePicker: React.FC = () => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [selectedPreset, setSelectedPreset] = useState<string>('today');\n\n    const presets = [\n        { id: 'today', label: 'Today' },\n        { id: 'yesterday', label: 'Yesterday' },\n        { id: 'thisWeek', label: 'This Week' },\n        { id: 'lastWeek', label: 'Last Week' },\n        { id: 'thisMonth', label: 'This Month' },\n        { id: 'lastMonth', label: 'Last Month' },\n        { id: 'custom', label: 'Custom Date Range' },\n    ];\n\n    const selectedLabel = presets.find((p) => p.id === selectedPreset)?.label || 'Select Range';\n\n    return (\n        <div className=\"relative\">\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"flex items-center gap-2 px-4 py-1.5 border border-slate-300 rounded-full bg-white hover:bg-slate-50 text-sm font-medium text-slate-700 shadow-sm\"\n            >\n                <span className=\"text-[10px] text-slate-400 uppercase font-bold mr-1\">Date range</span>\n                <span>{selectedLabel}</span>\n                <ChevronDown className=\"w-4 h-4 text-slate-400 ml-1\" />\n            </button>\n\n            {/* Dropdown (UI Only) */}\n            {isOpen && (\n                <div className=\"absolute top-full right-0 mt-1 w-56 bg-white border border-slate-200 rounded-lg shadow-xl z-50 overflow-hidden\">\n                    <div className=\"p-1\">\n                        {presets.map((preset) => (\n                            <button\n                                key={preset.id}\n                                onClick={() => {\n                                    setSelectedPreset(preset.id);\n                                    setIsOpen(false);\n                                }}\n                                className={cn(\n                                    'w-full px-4 py-2 text-sm text-left rounded-md transition-colors',\n                                    preset.id === selectedPreset\n                                        ? 'bg-emerald-50 text-emerald-700 font-bold'\n                                        : 'text-slate-600 hover:bg-slate-50'\n                                )}\n                            >\n                                {preset.label}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUO,MAAM,kBAA4B;;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAS;IAE7D,MAAM,UAAU;QACZ;YAAE,IAAI;YAAS,OAAO;QAAQ;QAC9B;YAAE,IAAI;YAAa,OAAO;QAAY;QACtC;YAAE,IAAI;YAAY,OAAO;QAAY;QACrC;YAAE,IAAI;YAAY,OAAO;QAAY;QACrC;YAAE,IAAI;YAAa,OAAO;QAAa;QACvC;YAAE,IAAI;YAAa,OAAO;QAAa;QACvC;YAAE,IAAI;YAAU,OAAO;QAAoB;KAC9C;IAED,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,iBAAiB,SAAS;IAE7E,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBACG,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,6LAAC;wBAAK,WAAU;kCAAsD;;;;;;kCACtE,6LAAC;kCAAM;;;;;;kCACP,6LAAC,sOAAW;wBAAC,WAAU;;;;;;;;;;;;YAI1B,wBACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACV,QAAQ,GAAG,CAAC,CAAC,uBACV,6LAAC;4BAEG,SAAS;gCACL,kBAAkB,OAAO,EAAE;gCAC3B,UAAU;4BACd;4BACA,WAAW,IAAA,8HAAE,EACT,mEACA,OAAO,EAAE,KAAK,iBACR,6CACA;sCAGT,OAAO,KAAK;2BAZR,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;AAoB9C;GArDa;KAAA"}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///home/lenovo/Desktop/v2/zyappy_frontend/src/modules/m9/components/Auth/RoleGuard.tsx"],"sourcesContent":["'use client';\n\nimport React, { ReactNode, useEffect } from 'react';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { useAuth } from '@/app/providers/AuthProvider';\nimport { useRouteAccess } from '@/hooks/useRouteAccess';\n\ninterface RoleGuardProps {\n    children: ReactNode;\n}\n\n/**\n * RoleGuard Component\n * UX-level protection for unauthorized routes.\n * Redirects unauthorized users to their first allowed screen.\n */\nexport const RoleGuard: React.FC<RoleGuardProps> = ({ children }) => {\n    const { isAuthenticated, isLoading } = useAuth();\n    const { isAuthorized, getVisibleMenuItems } = useRouteAccess();\n    const pathname = usePathname();\n    const router = useRouter();\n\n    useEffect(() => {\n        if (!isLoading && isAuthenticated) {\n            const authorized = isAuthorized(pathname || '');\n            if (!authorized) {\n                const allowedItems = getVisibleMenuItems();\n                const firstAllowed = allowedItems[0];\n                const fallback = firstAllowed ? firstAllowed.route : '/backoffice/home';\n\n                console.warn(`Access denied to ${pathname}. Redirecting to ${fallback}`);\n                router.replace(fallback);\n            }\n        } else if (!isLoading && !isAuthenticated) {\n            router.replace('/api/auth/signin');\n        }\n    }, [isLoading, isAuthenticated, pathname, isAuthorized, getVisibleMenuItems, router]);\n\n    // Still loading session\n    if (isLoading) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center bg-slate-50\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n            </div>\n        );\n    }\n\n    // Path check\n    const authorized = isAuthorized(pathname || '');\n    if (!isAuthenticated || !authorized) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center bg-slate-50\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n            </div>\n        );\n    }\n\n    return <>{children}</>;\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAgBO,MAAM,YAAsC,CAAC,EAAE,QAAQ,EAAE;;IAC5D,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,IAAA,sJAAO;IAC9C,MAAM,EAAE,YAAY,EAAE,mBAAmB,EAAE,GAAG,IAAA,mJAAc;IAC5D,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;+BAAC;YACN,IAAI,CAAC,aAAa,iBAAiB;gBAC/B,MAAM,aAAa,aAAa,YAAY;gBAC5C,IAAI,CAAC,YAAY;oBACb,MAAM,eAAe;oBACrB,MAAM,eAAe,YAAY,CAAC,EAAE;oBACpC,MAAM,WAAW,eAAe,aAAa,KAAK,GAAG;oBAErD,QAAQ,IAAI,CAAC,CAAC,iBAAiB,EAAE,SAAS,iBAAiB,EAAE,UAAU;oBACvE,OAAO,OAAO,CAAC;gBACnB;YACJ,OAAO,IAAI,CAAC,aAAa,CAAC,iBAAiB;gBACvC,OAAO,OAAO,CAAC;YACnB;QACJ;8BAAG;QAAC;QAAW;QAAiB;QAAU;QAAc;QAAqB;KAAO;IAEpF,wBAAwB;IACxB,IAAI,WAAW;QACX,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,aAAa;IACb,MAAM,aAAa,aAAa,YAAY;IAC5C,IAAI,CAAC,mBAAmB,CAAC,YAAY;QACjC,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,qBAAO;kBAAG;;AACd;GA1Ca;;QAC8B,sJAAO;QACA,mJAAc;QAC3C,oJAAW;QACb,kJAAS;;;KAJf"}}]
}